(this["webpackJsonpcsc3916-hw5"]=this["webpackJsonpcsc3916-hw5"]||[]).push([[0],{100:function(e,t,n){},174:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),s=n(14),i=n.n(s),r=(n(99),n(100),n(10)),o=n(11),d=n(13),l=n(12),u=n(181),h=n(183),j=n(25),p=n(9),m={USER_LOGGEDIN:"USER_LOGGEDIN",USER_LOGOUT:"USER_LOGOUT",FETCH_ITEMS:"FETCH_ITEMS",FETCH_ITEM:"FETCH_ITEM",SET_ITEM:"SET_ITEM",SET_CHECKOUT:"SET_CHECKOUT"},b=n(27),O=n.n(b);function g(e){var t=O()();return function(n){return fetch("".concat(t.REACT_APP_API_URL,"/signin"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e),mode:"cors"}).then((function(e){if(!e.ok)throw Error(e.statusText);return e.json()})).then((function(t){var a;localStorage.setItem("username",e.username),localStorage.setItem("token",t.token),n((a=e.username,{type:m.USER_LOGGEDIN,username:a}))})).catch((function(e){return console.log(e)}))}}function f(){return function(e){localStorage.removeItem("username"),localStorage.removeItem("token"),e({type:m.USER_LOGOUT})}}var x=n(1),I=function(e){Object(d.a)(n,e);var t=Object(l.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"logout",value:function(){this.props.dispatch(f())}},{key:"render",value:function(){return Object(x.jsx)("div",{children:Object(x.jsxs)(u.a,{expand:"lg",bg:"dark",variant:"dark",children:[Object(x.jsx)(u.a.Brand,{children:"Item App"}),Object(x.jsx)(u.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(x.jsx)(u.a.Collapse,{id:"basic-navbar-nav",children:Object(x.jsxs)(h.a,{children:[Object(x.jsx)(j.LinkContainer,{to:"/itemlist",children:Object(x.jsx)(h.a.Link,{disabled:!this.props.loggedIn,children:"Item List"})}),Object(x.jsx)(j.LinkContainer,{to:"/item/"+(this.props.selectedItem?this.props.selectedItem.itemId:""),children:Object(x.jsx)(h.a.Link,{disabled:!this.props.loggedIn,children:"Item Detail"})}),Object(x.jsx)(j.LinkContainer,{to:"/signin",children:Object(x.jsx)(h.a.Link,{children:this.props.loggedIn?Object(x.jsx)("button",{onClick:this.logout.bind(this),children:"Logout"}):"Login"})})]})})]})})}}]),n}(a.Component),v=Object(p.b)((function(e){return{loggedIn:e.auth.loggedIn,username:e.auth.username,selectedItem:e.item.selectedItem}}))(I),y=n(19);function C(e){return function(t){t(function(e){return{type:m.SET_CHECKOUT,name:e.name,cardNum:e.cardNum,charity:e.charity,payedAmt:e.payedAmt,donatedAmt:e.donatedAmt,donationStatus:e.donationStatus,shipAdr:e.shipAdr}}(e))}}function k(e){return function(t){t(function(e){return{type:m.SET_ITEM,selectedItem:e}}(e))}}function S(e){var t=O()();return function(n){return fetch("".concat(t.REACT_APP_API_URL,"/items/").concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:localStorage.getItem("token")},mode:"cors"}).then((function(e){if(!e.ok)throw Error(e.statusText);return e.json()})).then((function(e){n({type:m.FETCH_ITEM,selectedItem:e})})).catch((function(e){return console.log(e)}))}}function E(){var e=O()();return function(t){return fetch("".concat(e.REACT_APP_API_URL,"/items"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:localStorage.getItem("token")},mode:"cors"}).then((function(e){if(!e.ok)throw Error(e.statusText);return e.json()})).then((function(e){var n;t((n=e.Items,{type:m.FETCH_ITEMS,items:n}))})).catch((function(e){return console.log(e)}))}}var A=n(178),T=n(50),L=n(46),N=function(e){Object(d.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).handleClick=function(e){(0,a.props.dispatch)(k(e))},a.handleSelect=a.handleSelect.bind(Object(y.a)(a)),a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){(0,this.props.dispatch)(E())}},{key:"handleSelect",value:function(e,t){(0,this.props.dispatch)(k(this.props.items[e]))}},{key:"render",value:function(){var e=this,t=function(t){var n=t.itemList;return n?Object(x.jsx)(T.a,{onSelect:e.handleSelect,children:n.map((function(t){return Object(x.jsxs)(T.a.Item,{views:t.itemId,children:[Object(x.jsx)("div",{children:Object(x.jsx)(j.LinkContainer,{to:"/item/"+t.itemId,onClick:function(){return e.handleClick(t)},children:Object(x.jsx)(h.a.Link,{children:Object(x.jsx)(A.a,{className:"image",src:t.imageUrl,thumbnail:!0})})})}),Object(x.jsxs)(T.a.Caption,{children:[Object(x.jsx)("h3",{children:t.itemId}),Object(x.jsx)(L.a,{glyph:"star"})," ",t.itemName," \xa0\xa0 ",t.itemDesc]})]})}))}):Object(x.jsx)("div",{children:"Loading...."})};return Object(x.jsx)(t,{itemList:this.props.items})}}]),n}(a.Component),_=Object(p.b)((function(e){return{items:e.item.items}}))(N),w=n(89),D=n(8),P=n(184),R=n(179),M=n(87),U=n(180),G=n(20),F=function(e){Object(d.a)(n,e);var t=Object(l.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;null==this.props.selectedItem&&e(S(this.props.itemId))}},{key:"render",value:function(){var e=this,t=function(){return e.props.selectedItem?Object(x.jsxs)(P.a,{children:[Object(x.jsx)(P.a.Header,{children:"Item Detail"}),Object(x.jsx)(P.a.Body,{children:Object(x.jsx)(A.a,{className:"image",src:e.props.selectedItem.imageUrl,thumbnail:!0})}),Object(x.jsxs)(R.a,{children:[Object(x.jsx)(M.a,{children:e.props.selectedItem.itemId}),Object(x.jsx)(M.a,{children:Object(x.jsxs)("h4",{children:[Object(x.jsx)(L.a,{})," ",e.props.selectedItem.itemName]})}),Object(x.jsx)(M.a,{children:"$"+e.props.selectedItem.itemPrice}),Object(x.jsx)(M.a,{children:e.props.selectedItem.itemDesc})]}),Object(x.jsx)(G.Link,{to:"/buy",children:Object(x.jsx)(U.a,{color:"blue",children:"Purchase"})})]}):Object(x.jsx)("div",{children:"Loading...."})};return Object(x.jsx)(t,{})}}]),n}(a.Component),H=Object(p.b)((function(e){return{selectedItem:e.item.selectedItem}}))(F);var B=function(e){var t=Object(a.useState)(e.selectedItem),n=Object(w.a)(t,1)[0],c=Object(D.m)().itemId;console.log(c);var s=Object(p.c)();return null==n&&s(S(c)),Object(x.jsx)(H,{itemId:c})},z=n(182),J=function(e){Object(d.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).updateDetails=a.updateDetails.bind(Object(y.a)(a)),a.login=a.login.bind(Object(y.a)(a)),a.state={details:{username:"",password:""}},a}return Object(o.a)(n,[{key:"updateDetails",value:function(e){var t=Object.assign({},this.state.details);t[e.target.id]=e.target.value,this.setState({details:t})}},{key:"login",value:function(){(0,this.props.dispatch)(g(this.state.details))}},{key:"render",value:function(){return Object(x.jsxs)(z.a,{className:"form-horizontal",children:[Object(x.jsxs)(z.a.Group,{controlId:"username",children:[Object(x.jsx)(z.a.Label,{children:"Email"}),Object(x.jsx)(z.a.Control,{onChange:this.updateDetails,value:this.state.details.username,type:"text",placeholder:"Enter Username"})]}),Object(x.jsxs)(z.a.Group,{controlId:"password",children:[Object(x.jsx)(z.a.Label,{children:"Password"}),Object(x.jsx)(z.a.Control,{onChange:this.updateDetails,value:this.state.details.password,type:"password",placeholder:"Password"})]}),Object(x.jsx)(U.a,{onClick:this.login,children:"Sign in"})]})}}]),n}(a.Component),K=Object(p.b)((function(e){return{}}))(J),$=function(e){Object(d.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).updateDetails=a.updateDetails.bind(Object(y.a)(a)),a.register=a.register.bind(Object(y.a)(a)),a.state={details:{username:"",password:""}},a}return Object(o.a)(n,[{key:"updateDetails",value:function(e){var t=Object.assign({},this.state.details);t[e.target.id]=e.target.value,this.setState({details:t})}},{key:"register",value:function(){(0,this.props.dispatch)(function(e){var t=O()();return function(n){return fetch("".concat(t.REACT_APP_API_URL,"/signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e),mode:"cors"}).then((function(e){if(!e.ok)throw Error(e.statusText);return e.json()})).then((function(t){n(g(e))})).catch((function(e){return console.log(e)}))}}(this.state.details))}},{key:"render",value:function(){return Object(x.jsxs)(z.a,{className:"form-horizontal",children:[Object(x.jsxs)(z.a.Group,{controlId:"username",children:[Object(x.jsx)(z.a.Label,{children:"Email"}),Object(x.jsx)(z.a.Control,{onChange:this.updateDetails,value:this.state.details.username,type:"text",placeholder:"Enter Username"})]}),Object(x.jsxs)(z.a.Group,{controlId:"password",children:[Object(x.jsx)(z.a.Label,{children:"Password"}),Object(x.jsx)(z.a.Control,{onChange:this.updateDetails,value:this.state.details.password,type:"password",placeholder:"Password"})]}),Object(x.jsx)(U.a,{onClick:this.register,children:"Register"})]})}}]),n}(a.Component),Y=Object(p.b)((function(e){return{}}))($),W=function(e){Object(d.a)(n,e);var t=Object(l.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.call(this)).state={toggleReg:!1},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){}},{key:"showLogin",value:function(){this.setState({toggleReg:!1})}},{key:"showReg",value:function(){this.setState({toggleReg:!0})}},{key:"logout",value:function(){this.props.dispatch(f())}},{key:"render",value:function(){var e=Object(x.jsxs)("div",{children:[Object(x.jsx)("button",{onClick:this.showLogin.bind(this),children:"Login"}),Object(x.jsx)("button",{onClick:this.showReg.bind(this),children:"Register"}),this.state.toggleReg?Object(x.jsx)(Y,{}):Object(x.jsx)(K,{})]}),t=Object(x.jsxs)("div",{children:["Logged in as: ",this.props.username," ",Object(x.jsx)("button",{onClick:this.logout.bind(this),children:"Logout"})]});return Object(x.jsx)("div",{children:this.props.loggedIn?t:e})}}]),n}(a.Component),q=Object(p.b)((function(e){return{loggedIn:e.auth.loggedIn,username:e.auth.username}}))(W),Q=function(e){Object(d.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).updatedInfo=function(e,t){switch(e){case 0:a.setState({name:t});break;case 1:a.setState({cardNum:t});break;case 2:a.setState({charity:t});break;case 3:a.setState({payedAmt:t});break;case 4:a.setState({donatedAmt:t});break;case 5:a.setState({donationStatus:t});break;case 6:a.setState({shipAdr:t});break;default:console.log("Failed to set information for receipt, incorrect case value.")}},a.checkOut=function(){if("N/A"!==a.state.charity){var e=Math.round(parseInt(a.props.selectedItem.itemPrice))-parseInt(a.props.selectedItem.itemPrice),t=e+parseInt(a.props.selectedItem.itemPrice);a.updatedInfo(3,t),a.updatedInfo(5,"Yes"),a.updatedInfo(4,e),(0,a.props.dispatch)(C(a.state))}else{var n=parseInt(a.props.selectedItem.itemPrice);a.updatedInfo(3,n),a.updatedInfo(5,"No"),a.updatedInfo(4,"0"),(0,a.props.dispatch)(C(a.state))}},a.state={name:"",cardNum:"",charity:"",payedAmt:"",donatedAmt:"",donationStatus:"",shipAdr:""},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;null==this.props.selectedItem&&e(S(this.props.itemId))}},{key:"render",value:function(){var e=this;return Object(x.jsxs)(P.a,{children:[Object(x.jsx)(P.a.Header,{children:" Checkout"}),Object(x.jsxs)(R.a,{children:[Object(x.jsx)(M.a,{children:this.props.selectedItem.itemId}),Object(x.jsx)(M.a,{children:this.props.selectedItem.itemName}),Object(x.jsx)(M.a,{children:"$"+this.props.selectedItem.itemPrice}),Object(x.jsx)(M.a,{children:this.props.selectedItem.itemDesc})]}),Object(x.jsxs)(z.a,{className:"check-out",children:[Object(x.jsxs)(z.a.Group,{controlId:"Name",children:[Object(x.jsx)(z.a.Label,{children:"Name"}),Object(x.jsx)("input",{onChange:function(t){return e.updatedInfo(0,t.target.value)},type:"text",placeholder:"Enter Name on card"})]}),Object(x.jsxs)(z.a.Group,{controlId:"CardNum",children:[Object(x.jsx)(z.a.Label,{children:"Card Number"}),Object(x.jsx)("input",{onChange:function(t){return e.updatedInfo(1,t.target.value)},type:"text",placeholder:"Enter card number"})]}),Object(x.jsxs)(z.a.Group,{controlId:"ShippingAdr",children:[Object(x.jsx)(z.a.Label,{children:"Shipping Address"}),Object(x.jsx)("input",{onChange:function(t){return e.updatedInfo(6,t.target.value)},type:"text",placeholder:"Enter Shipping Address"})]})]}),Object(x.jsxs)("label",{children:["Would You like to round up to the nearest dollar amount and donate the difference to charity?",Object(x.jsxs)("select",{onChange:function(t){return e.updatedInfo(2,t.target.value)},children:[Object(x.jsx)("option",{value:"N/A",children:"No donation."}),Object(x.jsx)("option",{value:"Misplaced Mythical Creatures Foundation",children:"Donate to Misplaced Mythical Creatures Foundation"}),Object(x.jsx)("option",{value:"Foundation for the coding impaired",children:"Donate to the Charity for the coding impaired"}),Object(x.jsx)("option",{value:"Hell's moral improvement fund",children:"Donate to the hell's moral improvement fund"})]})]}),Object(x.jsx)(G.Link,{to:"./Reciept",children:Object(x.jsx)(U.a,{type:"button",onClick:this.checkOut,children:"Finish Checkout"})})]})}}]),n}(a.Component),V=Object(p.b)((function(e){return{selectedItem:e.item.selectedItem}}))(Q),X=function(e){Object(d.a)(n,e);var t=Object(l.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(x.jsxs)(P.a,{children:[Object(x.jsx)(P.a.Header,{children:" Receipt"}),Object(x.jsx)(P.a.Body,{children:Object(x.jsx)(A.a,{className:"image",src:this.props.image,thumbnail:!0})}),Object(x.jsxs)(R.a,{children:[Object(x.jsx)(M.a,{children:"Item Name: "+this.props.selectedItem.itemName}),Object(x.jsx)(M.a,{children:"Item cost: $"+this.props.selectedItem.itemPrice}),Object(x.jsx)(M.a,{children:"Item Desc: "+this.props.selectedItem.itemDesc}),Object(x.jsx)(M.a,{children:"Name of buyer: "+this.props.name}),Object(x.jsx)(M.a,{children:"Shipping Address: "+this.props.shipAdr}),Object(x.jsx)(M.a,{children:"Total Payed: "+this.props.payedAmt}),Object(x.jsx)(M.a,{children:"Making Donation?:"+this.props.donatedStatus}),Object(x.jsx)(M.a,{children:"Total amount Donated: "+this.props.donatedAmt}),Object(x.jsx)(M.a,{children:"Charity donated to: "+this.props.charity})]}),Object(x.jsx)(U.a,{onClick:function(){window.location.href="https://webapi-oddjobs.herokuapp.com"},children:"Return to home"})]})}}]),n}(a.Component),Z=Object(p.b)((function(e){return{selectedItem:e.item.selectedItem,name:e.item.name,cardNum:e.item.cardNum,charity:e.item.charity,payedAmt:e.item.payedAmt,donatedAmt:e.item.donatedAmt,donatedStatus:e.item.donatedStatus,shipAdr:e.item.shipAdr}}))(X),ee=n(26),te=n(88),ne={loggedIn:!!localStorage.getItem("token"),username:localStorage.getItem("username")?localStorage.getItem("username"):""},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0,n=Object.assign({},e);switch(t.type){case m.USER_LOGGEDIN:return n.loggedIn=!0,n.username=t.username,n;case m.USER_LOGOUT:return n.loggedIn=!1,n.username="",n;default:return e}},ce={items:[],selectedItem:null,name:"No Name",cardNum:"0",charity:"N/A",payedAmt:"0",donatedAmt:"0",donationStatus:"No",shipAdr:"Missing Shipping Address"},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0,n=Object.assign({},e);switch(t.type){case m.FETCH_ITEMS:return n.items=t.items,n.selectedItem=t.items[0],n;case m.SET_ITEM:case m.FETCH_ITEM:return n.selectedItem=t.selectedItem,n;case m.SET_CHECKOUT:return n.itemName=t.itemName,n.price=t.price,n.desc=t.desc,n.image=t.image,n.name=t.name,n.cardNum=t.cardNum,n.charity=t.charity,n.payedAmt=t.payedAmt,n.donatedAmt=t.donatedAmt,n.donationStatus=t.donationStatus,n.shipAdr=t.shipAdr,n;default:return e}},ie=[te.a],re=Object(ee.d)(Object(ee.c)({auth:ae,item:se}),ee.a.apply(void 0,ie));var oe=function(){return Object(x.jsx)("div",{className:"App",children:Object(x.jsx)(p.a,{store:re,children:Object(x.jsx)(G.HashRouter,{children:Object(x.jsxs)("div",{children:[Object(x.jsx)(v,{}),Object(x.jsx)(D.d,{exact:!0,path:"/",render:function(){return Object(x.jsx)(_,{})}}),Object(x.jsx)(D.d,{exact:!0,path:"/itemlist",render:function(){return Object(x.jsx)(_,{})}}),Object(x.jsx)(D.d,{exact:!0,path:"/item/:itemId",render:function(){return Object(x.jsx)(B,{})}}),Object(x.jsx)(D.d,{path:"/signin",render:function(){return Object(x.jsx)(q,{})}}),Object(x.jsx)(D.d,{eaxct:!0,path:"/buy",render:function(){return Object(x.jsx)(V,{})}}),Object(x.jsx)(D.d,{exact:!0,path:"/Reciept",render:function(){return Object(x.jsx)(Z,{})}})]})})})})},de=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,185)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),s(e),i(e)}))};i.a.render(Object(x.jsx)(c.a.StrictMode,{children:Object(x.jsx)(oe,{})}),document.getElementById("root")),de()},99:function(e,t,n){}},[[174,1,2]]]);
//# sourceMappingURL=main.49ca517b.chunk.js.map